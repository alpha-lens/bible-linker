/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var R=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var B=Object.prototype.hasOwnProperty;var O=(r,l)=>{for(var e in l)R(r,e,{get:l[e],enumerable:!0})},N=(r,l,e,t)=>{if(l&&typeof l=="object"||typeof l=="function")for(let s of F(l))!B.call(r,s)&&s!==e&&R(r,s,{get:()=>l[s],enumerable:!(t=C(l,s))||t.enumerable});return r};var A=r=>N(R({},"__esModule",{value:!0}),r);var M={};O(M,{default:()=>f});module.exports=A(M);var T=require("obsidian");var S={bibleRoot:"bible",defaultVersion:"\uAC1C\uC5ED\uAC1C\uC815",multiVersion:!1,versions:[],outputFormat:"inline",addNewlineAfterInsert:!1};var d=require("obsidian"),g=class extends d.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}display(){let{containerEl:e}=this,t=this.plugin.settings;e.empty(),e.createEl("h2",{text:"Bible Linker Settings"}),new d.Setting(e).setName("\uC131\uACBD \uB8E8\uD2B8 \uD3F4\uB354").setDesc("\uC608: bible").addText(s=>s.setPlaceholder("bible").setValue(t.bibleRoot).onChange(async i=>{t.bibleRoot=i.trim(),await this.plugin.saveSettings()})),new d.Setting(e).setName("\uB2E4\uC911 \uC5ED\uBCF8 \uC0AC\uC6A9").setDesc("\uC5EC\uB7EC \uC5ED\uBCF8\uC744 \uC9C0\uC6D0\uD558\uB824\uBA74 \uCCB4\uD06C\uD558\uC138\uC694.").addToggle(s=>s.setValue(t.multiVersion).onChange(async i=>{t.multiVersion=i,await this.plugin.saveSettings(),this.display()})),new d.Setting(e).setName("\uBCF8\uBB38 \uC0BD\uC785 \uD6C4 \uC904\uBC14\uAFC8 \uCD94\uAC00").setDesc("\uBCF8\uBB38 \uC0BD\uC785 \uD6C4 \uC904\uBC14\uAFC8\uC744 \uCD94\uAC00\uD560\uC9C0 \uC5EC\uBD80\uB97C \uC124\uC815\uD569\uB2C8\uB2E4.").addToggle(s=>s.setValue(this.plugin.settings.addNewlineAfterInsert).onChange(async i=>{this.plugin.settings.addNewlineAfterInsert=i,await this.plugin.saveSettings()})),t.multiVersion&&new d.Setting(e).setName("\uC5ED\uBCF8 \uBAA9\uB85D").setDesc("\uAC01 \uC904\uB9C8\uB2E4 \uC5ED\uBCF8 \uC774\uB984\uC744 \uC785\uB825\uD558\uC138\uC694.").addTextArea(s=>s.setPlaceholder(`\uAC1C\uC5ED\uAC1C\uC815
\uC0C8\uBC88\uC5ED
\uD760\uC815\uC5ED
NIV`).setValue(t.versions.join(`
`)).onChange(async i=>{t.versions=i.split(`
`).map(o=>o.trim()).filter(o=>o.length>0),await this.plugin.saveSettings()})),new d.Setting(e).setName("\uCD9C\uB825 \uD615\uC2DD").setDesc("\uC131\uACBD \uC808 \uCD9C\uB825 \uD615\uC2DD\uC744 \uC120\uD0DD\uD558\uC138\uC694.").addDropdown(s=>{s.addOption("inline","\uD55C \uC904\uB85C \uCD9C\uB825 (\uAE30\uBCF8)").addOption("verseBlock","\uC808 \uB2E8\uC704 \uBE14\uB85D").addOption("callout","Callout").setValue(this.plugin.settings.outputFormat).onChange(async i=>{this.plugin.settings.outputFormat=i,await this.plugin.saveSettings()})})}};var m=require("obsidian");function y(r){let l=r.match(/^([가-힣]+)(\d+):([\d, -]+)$/);if(!l)return null;let[,e,t,s]=l,i=[];return s.split(",").forEach(o=>{if(o.includes("-")){let[p,u]=o.split("-").map(n=>parseInt(n.trim()));for(let n=p;n<=u;n++)i.push(n)}else i.push(parseInt(o.trim()))}),{book:e,chapter:t,verses:i}}function L(r,l){let e=new RegExp(`#\\s*${l}\\s*\\n([\\s\\S]*?)(?=\\n#|$)`,"m"),t=r.match(e);return t&&t[1]?t[1].trim():null}var I={\uCC3D:"\uCC3D\uC138\uAE30",\uCD9C:"\uCD9C\uC560\uAD7D\uAE30",\uB808:"\uB808\uC704\uAE30",\uBBFC:"\uBBFC\uC218\uAE30",\uC2E0:"\uC2E0\uBA85\uAE30",\uC218:"\uC5EC\uD638\uC218\uC544",\uC0BF:"\uC0AC\uC0AC\uAE30",\uB8FB:"\uB8FB\uAE30",\uC0BC\uC0C1:"\uC0AC\uBB34\uC5D8\uC0C1",\uC0BC\uD558:"\uC0AC\uBB34\uC5D8\uD558",\uC655\uC0C1:"\uC5F4\uC655\uAE30\uC0C1",\uC655\uD558:"\uC5F4\uC655\uAE30\uD558",\uB300\uC0C1:"\uC5ED\uB300\uC0C1",\uB300\uD558:"\uC5ED\uB300\uD558",\uC2A4:"\uC5D0\uC2A4\uB77C",\uB290:"\uB290\uD5E4\uBBF8\uC57C",\uC5D0:"\uC5D0\uC2A4\uB354",\uC6A5:"\uC6A5\uAE30",\uC2DC:"\uC2DC\uD3B8",\uC7A0:"\uC7A0\uC5B8",\uC804:"\uC804\uB3C4\uC11C",\uC544:"\uC544\uAC00",\uC0AC:"\uC774\uC0AC\uC57C",\uB818:"\uC608\uB808\uBBF8\uC57C",\uC560:"\uC608\uB808\uBBF8\uC57C\uC560\uAC00",\uAC94:"\uC5D0\uC2A4\uAC94",\uB2E8:"\uB2E4\uB2C8\uC5D8",\uD638:"\uD638\uC138\uC544",\uC69C:"\uC694\uC5D8",\uC554:"\uC544\uBAA8\uC2A4",\uC635:"\uC624\uBC14\uB31C",\uC698:"\uC694\uB098",\uBBF8:"\uBBF8\uAC00",\uB098:"\uB098\uD6D4",\uD569:"\uD558\uBC15\uAD6D",\uC2B5:"\uC2A4\uBC14\uB0D0",\uD559:"\uD559\uAC1C",\uC2A5:"\uC2A4\uAC00\uB7B4",\uB9D0:"\uB9D0\uB77C\uAE30",\uB9C8:"\uB9C8\uD0DC\uBCF5\uC74C",\uB9C9:"\uB9C8\uAC00\uBCF5\uC74C",\uB205:"\uB204\uAC00\uBCF5\uC74C",\uC694:"\uC694\uD55C\uBCF5\uC74C",\uD589:"\uC0AC\uB3C4\uD589\uC804",\uB86C:"\uB85C\uB9C8\uC11C",\uACE0\uC804:"\uACE0\uB9B0\uB3C4\uC804\uC11C",\uACE0\uD6C4:"\uACE0\uB9B0\uB3C4\uD6C4\uC11C",\uAC08:"\uAC08\uB77C\uB514\uC544\uC11C",\uC5E1:"\uC5D0\uBCA0\uC18C\uC11C",\uBE4C:"\uBE4C\uB9BD\uBCF4\uC11C",\uACE8:"\uACE8\uB85C\uC0C8\uC11C",\uC0B4\uC804:"\uB370\uC0B4\uB85C\uB2C8\uAC00\uC804\uC11C",\uC0B4\uD6C4:"\uB370\uC0B4\uB85C\uB2C8\uAC00\uD6C4\uC11C",\uB524\uC804:"\uB514\uBAA8\uB370\uC804\uC11C",\uB524\uD6C4:"\uB514\uBAA8\uB370\uD6C4\uC11C",\uB51B:"\uB514\uB3C4\uC11C",\uBAAC:"\uBE4C\uB808\uBAAC\uC11C",\uD788:"\uD788\uBE0C\uB9AC\uC11C",\uC57D:"\uC57C\uACE0\uBCF4\uC11C",\uBCA7\uC804:"\uBCA0\uB4DC\uB85C\uC804\uC11C",\uBCA7\uD6C4:"\uBCA0\uB4DC\uB85C\uD6C4\uC11C",\uC694\uC77C:"\uC694\uD55C\uC77C\uC11C",\uC694\uC774:"\uC694\uD55C\uC774\uC11C",\uC694\uC0BC:"\uC694\uD55C\uC0BC\uC11C",\uC720:"\uC720\uB2E4\uC11C",\uACC4:"\uC694\uD55C\uACC4\uC2DC\uB85D"},b=class extends m.Modal{constructor(e,t,s){super(e);this.lastResult="";this.editor=t,this.settings=s}async onOpen(){let{contentEl:e}=this;e.addClass("bible-linker-modal"),e.createEl("h2",{text:"\uC131\uACBD \uC808 \uCC3E\uAE30"});let t=null;this.settings.multiVersion&&this.settings.versions.length>0&&(t=e.createEl("select"),this.settings.versions.forEach(u=>{let n=document.createElement("option");n.text=u,t==null||t.appendChild(n)}));let s=e.createEl("select");["inline","verseBlock","callout"].forEach(u=>{let n=document.createElement("option");n.value=u,n.text=u==="inline"?"\uC778\uB77C\uC778":u==="verseBlock"?"\uC808\uBCC4 \uBE14\uB85D":"\uCF5C\uC544\uC6C3",s.appendChild(n)}),s.value=this.settings.outputFormat;let i=e.createEl("input",{type:"text",placeholder:"\uC608: \uCC3D1:1-2"}),o=e.createEl("div");o.classList.add("bible-verse-result"),o.style.marginTop="1em";let p=e.createEl("button",{text:"\uC0BD\uC785"});p.style.marginTop="1em",p.disabled=!0,i.addEventListener("input",async()=>{await this.updateResult(i,o,s,t,p)}),i.addEventListener("keydown",async u=>{u.key==="Enter"&&(u.preventDefault(),this.lastResult?this.insertResult(this.lastResult):(await this.updateResult(i,o,s,t,p),this.lastResult&&this.insertResult(this.lastResult)))}),p.addEventListener("click",()=>{this.lastResult&&this.insertResult(this.lastResult)}),setTimeout(()=>i.focus(),0)}async updateResult(e,t,s,i,o){let p=e.value.trim(),u=y(p);if(!u){t.innerText="\uC62C\uBC14\uB978 \uD615\uC2DD\uC774 \uC544\uB2D9\uB2C8\uB2E4. \uC608: \uCC3D1:1-2",o.disabled=!0,this.lastResult="";return}let{book:n,chapter:h,verses:$}=u,E=I[n]||n,V=i?i.value:this.settings.defaultVersion,k=this.settings.multiVersion?`${this.settings.bibleRoot}/${V}/${n}/${n}${h}.md`:`${this.settings.bibleRoot}/${n}/${n}${h}.md`,w=this.app.vault.getAbstractFileByPath(k);if(!(w instanceof m.TFile)){t.innerText=`\uD30C\uC77C\uC744 \uCC3E\uC744 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4: ${k}`,o.disabled=!0,this.lastResult="";return}try{let v=await this.app.vault.read(w),x=$.map(a=>{let c=L(v,a);return c?`${n}${h}:${a} ${c}`:""});switch(s.value){case"inline":this.lastResult=`${E} ${h}\uC7A5
`+x.map(a=>{let c=a.indexOf(":");return c!==-1?a.slice(c+1).trim():a}).join(" ");break;case"verseBlock":this.lastResult=`${E} ${h}\uC7A5
`+x.map(a=>{let c=a.indexOf(":");return c!==-1?a.slice(c+1).trim():a}).join(`
`);break;case"callout":this.lastResult=`>[!note]+ ${E} ${h}\uC7A5
`+x.map(a=>{let c=a.indexOf(":");return c!==-1?`> ${a.slice(c+1).trim()}`:`> ${a}`}).join(`
`);break}t.innerText=this.lastResult,o.disabled=!1}catch(v){console.error(v),t.innerText="\uD30C\uC77C\uC744 \uC77D\uB294 \uB3C4\uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.",o.disabled=!0,this.lastResult=""}}insertResult(e){let t=this.editor.getCursor();this.editor.replaceRange(e,t);let s=e.split(`
`).length,i=t.line+s-1,o=this.editor.getLine(i).length;this.editor.replaceRange(`

`,{line:i,ch:o}),this.editor.setCursor({line:i+2,ch:0}),new m.Notice("\uBCF8\uBB38\uC774 \uC0BD\uC785\uB418\uC5C8\uC2B5\uB2C8\uB2E4."),this.close()}onClose(){this.contentEl.empty()}};var f=class extends T.Plugin{async onload(){await this.loadSettings(),this.addSettingTab(new g(this.app,this)),this.addCommand({id:"open-bible-linker",name:"\uC131\uACBD \uC808 \uCC3E\uAE30",editorCallback:e=>{new b(this.app,e,this.settings).open()},hotkeys:[{modifiers:["Mod","Shift"],key:"b"}]})}async loadSettings(){this.settings=Object.assign({},S,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};
